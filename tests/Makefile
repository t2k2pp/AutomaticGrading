# PMè©¦é¨“AIæ¡ç‚¹ã‚·ã‚¹ãƒ†ãƒ  - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
.PHONY: install test api-test ui-test clean help

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
help:
	@echo "PMè©¦é¨“AIæ¡ç‚¹ã‚·ã‚¹ãƒ†ãƒ  - ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰"
	@echo ""
	@echo "åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:"
	@echo "  make install    - ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
	@echo "  make test       - å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"
	@echo "  make api-test   - APIãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ"
	@echo "  make ui-test    - UIãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ"
	@echo "  make clean      - ãƒ†ã‚¹ãƒˆçµæœã‚¯ãƒªã‚¢"

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
install:
	@echo "ğŸ“¦ ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­..."
	pip install -r requirements.txt
	playwright install chromium

# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
test:
	@echo "ğŸš€ å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­..."
	python run_tests.py

# APIãƒ†ã‚¹ãƒˆã®ã¿
api-test:
	@echo "ğŸ”§ APIãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œä¸­..."
	python test_api.py

# UIãƒ†ã‚¹ãƒˆã®ã¿
ui-test:
	@echo "ğŸ­ UIãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œä¸­..."
	python test_ui.py

# pytestä½¿ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
pytest:
	@echo "ğŸ§ª pytestå®Ÿè¡Œä¸­..."
	pytest -v test_api.py test_ui.py

# ã‚¯ãƒªã‚¢
clean:
	@echo "ğŸ§¹ ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚¯ãƒªã‚¢ä¸­..."
	find . -name "*.pyc" -delete
	find . -name "__pycache__" -delete
	rm -rf .pytest_cache